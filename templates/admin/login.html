{% extends "admin/base.html" %}
{% load i18n static %}

{% block extrahead %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/login.css' %}?v=2.0">
    <style>
        /* Ocultar elementos del admin */
        #header, .breadcrumbs, #nav-sidebar, .skip-link {
            display: none !important;
        }
        
        /* Ocultar el enlace de accesibilidad */
        a[href="#content-start"] {
            display: none !important;
        }
        
        /* FORZAR FONDO CON IMAGEN */
        body.login {
            background: 
                linear-gradient(135deg, rgba(185, 28, 28, 0.7) 0%, rgba(153, 27, 27, 0.8) 50%, rgba(127, 29, 29, 0.9) 100%),
                url('{% static "img/peaje.png" %}') center/cover no-repeat fixed !important;
            min-height: 100vh !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        /* CENTRADO ABSOLUTO */
        .login-container {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            z-index: 1000 !important;
        }
    </style>
{% endblock %}

{% block bodyclass %}{{ block.super }} login{% endblock %}

{% block nav-global %}{% endblock %}
{% block breadcrumbs %}{% endblock %}
{% block nav-sidebar %}{% endblock %}

{% block content_title %}{% endblock %}

{% block content %}
    <div class="login-container">
        <div class="login-box">
            <div class="login-header">
                <img src="{% static 'img/logo_regency.png' %}" alt="Regency Logo" class="login-logo" onerror="this.style.display='none';">
                <h2>Sistema de Gestión de Turnos</h2>
                <p>REGENCY SERVICES DE COLOMBIA S.A.S</p>
            </div>

            {% if form.errors and not form.non_field_errors %}
                <p class="alert alert-error">Por favor corrige los errores a continuación.</p>
            {% endif %}

            {% if form.non_field_errors %}
                {% for error in form.non_field_errors %}
                    <p class="alert alert-error">{{ error }}</p>
                {% endfor %}
            {% endif %}

            <form method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="{{ form.username.id_for_label }}">Nombre de usuario</label>
                    {{ form.username }}
                    {% if form.username.errors %}
                        {% for error in form.username.errors %}
                            <p class="field-error">{{ error }}</p>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.password.id_for_label }}">Contraseña</label>
                    {{ form.password }}
                    {% if form.password.errors %}
                        {% for error in form.password.errors %}
                            <p class="field-error">{{ error }}</p>
                        {% endfor %}
                    {% endif %}
                </div>

                <button type="submit" class="btn-login">Iniciar Sesión</button>
            </form>

            {% url 'admin_password_reset' as password_reset_url %}
            {% if password_reset_url %}
                <div class="forgot-password">
                    <a href="{{ password_reset_url }}">¿Olvidaste tu contraseña?</a>
                </div>
            {% endif %}

            <div class="login-footer">
                <p>© 2025 REGENCY SERVICES DE COLOMBIA S.A.S</p>
                <p>Sistema de Gestión de Turnos v1.0</p>
            </div>
        </div>
    </div>
{% endblock %}