<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Segmentos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-row { margin: 10px 0; }
        .form-row label { display: inline-block; width: 150px; }
        .form-row input, .form-row select { width: 200px; padding: 5px; }
        .segmentos-container { border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
        .controles-segmentos { margin: 10px 0; }
        .btn-segmento { margin: 5px; padding: 8px 15px; border: none; cursor: pointer; }
        .btn-segmento.success { background: #28a745; color: white; }
        .btn-segmento.danger { background: #dc3545; color: white; }
        .segmento-item { border: 1px solid #ddd; margin: 10px 0; padding: 10px; }
        .segmento-campos { display: flex; gap: 10px; align-items: center; }
        .segmento-campos input, .segmento-campos select { width: 120px; }
        .segmento-numero { font-weight: bold; margin-bottom: 5px; }
        .tipo-turno-info { background: #f8f9fa; padding: 10px; margin: 10px 0; border-left: 4px solid #007bff; }
        .error { border-left-color: #dc3545; }
    </style>
</head>
<body>
    <h1>Test Admin Segmentos</h1>
    
    <form>
        <div class="form-row">
            <label>Letra turno:</label>
            <input type="text" id="id_letra_turno" value="">
        </div>
        
        <div class="form-row">
            <label>Tipo:</label>
            <select id="id_tipo">
                <option value="N">Normal</option>
                <option value="D">Descanso</option>
                <option value="F">Festivo</option>
                <option value="E">Especial</option>
                <option value="ND">No Devengado</option>
            </select>
        </div>
        
        <div class="form-row">
            <label>Estado codigo:</label>
            <input type="text" id="id_estado_codigo" value="1">
        </div>
        
        <div class="form-row">
            <label>Segmentos horas:</label>
            <textarea id="id_segmentos_horas" style="display: none;" class="hidden-json-field"></textarea>
        </div>
        
        <div class="form-row">
            <label>Duración Total (horas):</label>
            <input type="text" id="id_duracion_total" value="-">
        </div>
        
        <div class="form-row">
            <label>Descripcion novedad:</label>
            <input type="text" id="id_descripcion_novedad" value="">
        </div>
    </form>
    
    <div style="margin-top: 20px;">
        <h3>Debug Info:</h3>
        <div id="debug-info"></div>
    </div>
    
    <script>
        // Simular django.jQuery
        window.django = { jQuery: $ };
        
        // Cargar el JavaScript del admin
        $.getScript('templates/admin/js/codigo_turno.js')
            .done(function() {
                console.log('✅ JavaScript cargado correctamente');
                updateDebugInfo();
            })
            .fail(function() {
                console.log('❌ Error cargando JavaScript');
                $('#debug-info').html('<p style="color: red;">Error cargando JavaScript</p>');
            });
        
        function updateDebugInfo() {
            const info = `
                <p><strong>Campo segmentos_horas:</strong> ${$('#id_segmentos_horas').length ? 'Encontrado' : 'No encontrado'}</p>
                <p><strong>Contenedor segmentos:</strong> ${$('.segmentos-container').length ? 'Creado' : 'No creado'}</p>
                <p><strong>Botones de control:</strong> ${$('.btn-agregar-segmento').length}</p>
                <p><strong>Segmentos actuales:</strong> ${$('.segmento-item').length}</p>
                <p><strong>Valor JSON:</strong> ${$('#id_segmentos_horas').val() || 'Vacío'}</p>
            `;
            $('#debug-info').html(info);
        }
        
        // Actualizar debug cada 2 segundos
        setInterval(updateDebugInfo, 2000);
    </script>
</body>
</html> 