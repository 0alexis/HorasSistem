<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard de Empresas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
    <style>
        :root {
            --color-primary: #B91C1C;      /* Rojo REGENCY */
            --color-secondary: #991B1B;    /* Rojo m√°s oscuro */
            --color-accent: #7F1D1D;       /* Rojo profundo */
            --color-light: #FEF2F2;        /* Rojo muy claro */
            --color-dark: #450A0A;         /* Rojo muy oscuro */
        }
        
        body {
            background-color: #F8FAFC;
        }
        
        .header-corporativo {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .logo-empresa {
            height: 60px;
            margin-right: 20px;
            background: white;
            padding: 5px;
            border-radius: 8px;
        }
        
        .card-metric-1 { 
            background: linear-gradient(135deg, var(--color-primary), #DC2626);
            color: white;
            border: none;
            transform: scale(0.6);  /* Makes the card 90% of original size */
            margin: -10px;  /* Adjusts spacing to prevent gaps */
        }
        .card-metric-2 { 
            background: linear-gradient(135deg, var(--color-secondary), var(--color-primary));
            color: white;
            border: none;
            transform: scale(0.6);  /* Makes the card 90% of original size */
            margin: -10px;  /* Adjusts spacing to prevent gaps */
        }
        .card-metric-3 { 
            background: linear-gradient(135deg, var(--color-accent), var(--color-secondary));
            color: white;
            border: none;
            transform: scale(0.6);  /* Makes the card 90% of original size */
            margin: -10px;  /* Adjusts spacing to prevent gaps */
        }
        .card-metric-4 { 
            background: linear-gradient(135deg, var(--color-dark), var(--color-accent));
            color: white;
            border: none;
            transform: scale(0.6);  /* Makes the card 90% of original size */
            margin: -10px;  /* Adjusts spacing to prevent gaps */
        }
        
        .btn-regency {
            background-color: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
            font-weight: 500;
        }
        
        .btn-regency:hover {
            background-color: var(--color-secondary);
            border-color: var(--color-secondary);
            color: white;
        }
        
        .btn-regency-outline {
            border-color: var(--color-primary);
            color: var(--color-primary);
            font-weight: 500;
        }
        
        .btn-regency-outline:hover {
            background-color: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
        }
        
        .card-header-regency {
            background-color: var(--color-primary);
            color: white;
            font-weight: 600;
        }
        
        .card-header-secondary {
            background-color: var(--color-secondary);
            color: white;
            font-weight: 600;
        }
        
        .table-header-regency {
            background-color: var(--color-dark);
            color: white;
        }
        
        .badge-active {
            background-color: #059669 !important;
        }
        
        .badge-inactive {
            background-color: var(--color-primary) !important;
        }
        
        .metric-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .shadow-regency {
            box-shadow: 0 4px 6px rgba(185, 28, 28, 0.1);
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <!-- Header Corporativo con Logo REGENCY -->
                <div class="header-corporativo">
                    <div class="d-flex align-items-center">
                        <img src="{% static '/img/logo_regency.png' %}" alt="REGENCY SERVICES" class="logo-empresa">
                        <div>
                            <h1 class="mb-1">üè¢ Dashboard de Empresas</h1>
                            <p class="mb-0 opacity-75">REGENCY SERVICES DE COLOMBIA S.A.S - Panel de Control y Gesti√≥n</p>
                        </div>
                    </div>
                </div>
                
                <!-- Cards de M√©tricas Estilo REGENCY -->
                <div class="row mb-1">
                    <div class="col-md-3">
                        <div class="card card-metric-1 shadow-regency">
                            <div class="card-body text-center">

                                <h5 class="card-title mb-2">EMPRESAS ACTIVAS</h5>
                                <h2 class="display-3 fw-bold">{{ empresa_activa }}</h2>
                                <small class="opacity-75">de {{ total_empresas }} registradas</small>
                            </div>
                        </div>
                    </div>
                    
                    
                    <div class="col-md-3">
                        <div class="card card-metric-4 shadow-regency">
                            <div class="card-body text-center">
                               
                                <h5 class="card-title mb-2">NUEVAS ESTE MES</h5>
                                <h2 class="display-3 fw-bold">{{ empresas_mes_actual }}</h2>
                                <small class="opacity-75">√∫ltimos 30 d√≠as</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Secci√≥n de Acciones Principales -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card shadow-regency">
                            <div class="card-header card-header-regency">
                                <h5 class="mb-0">üöÄ Acciones Principales</h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-3">
                                        <a href="{% url 'empresas:empresa_create' %}" class="btn btn-regency btn-lg w-100">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <span class="me-2">‚ûï</span>
                                                <span>Nueva Empresa</span>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-3">
                                        <a href="{% url 'empresas:empresas_list' %}" class="btn btn-regency-outline btn-lg w-100">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <span class="me-2">üìã</span>
                                                <span>Lista Completa</span>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-3">
                                        <a href="#" class="btn btn-regency-outline btn-lg w-100">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <span class="me-2">üìä</span>
                                                <span>...</span>
                                            </div>
                                        </a>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenido Principal -->
                <div class="row">
                    <div class="col-md-8">
                        <div class="card shadow-regency">
                            <div class="card-header card-header-secondary">
                                <h5 class="mb-0">üìã Empresas Recientes</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0">
                                        <thead class="table-header-regency">
                                            <tr>
                                                <th>Empresa</th>
                                                <th>NIT</th>
                                                <th>Estado</th>
                                                <th>Fecha Registro</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for empresa in empresas_recientes %}
                                            <tr>
                                                <td>
                                                    <div class="fw-bold text-dark">{{ empresa.nombre }}</div>
                                                    {% if empresa.email %}
                                                        <small class="text-muted">{{ empresa.email }}</small>
                                                    {% endif %}
                                                </td>
                                                <td class="font-monospace">{{ empresa.nit }}</td>
                                                <td>
                                                    {% if empresa.activo %}
                                                        <span class="badge badge-active px-3 py-2">‚úÖ Activa</span>
                                                    {% else %}
                                                        <span class="badge badge-inactive px-3 py-2">‚ùå Inactiva</span>
                                                    {% endif %}
                                                </td>
                                                <td>{{ empresa.fecha_creacion|date:"d/m/Y" }}</td>
                                                <td>
                                                    <div class="btn-group" role="group">
                                                        <a href="{% url 'empresas:empresa_detail' empresa.pk %}" class="btn btn-sm btn-outline-warning" title=" Ver Detalle"> üëÅÔ∏è</a>
                                                            
                                                        <a href="{% url 'empresas:empresa_update' empresa.pk %}" class="btn btn-sm btn-outline-warning" title="Editar">‚úèÔ∏è</a>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% empty %}
                                            <tr>
                                                <td colspan="5" class="text-center py-5">
                                                    <div class="text-muted">
                                                        <div class="display-1 mb-3">üè¢</div>
                                                        <h5>No hay empresas registradas</h5>
                                                        <p class="mb-3">Comienza creando tu primera empresa</p>
                                                        <a href="{% url 'empresas:empresa_create' %}" class="btn btn-regency">
                                                            ‚ûï Crear Primera Empresa
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Panel Lateral -->
                    <div class="col-md-4">
                        <!-- Menu R√°pido -->
                        <div class="card shadow-regency mb-3">
                            <div class="card-header card-header-regency">
                                <h5 class="mb-0">‚ö° Men√∫ R√°pido</h5>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <a href="{% url 'empresas:empresa_create' %}" class="btn btn-regency">
                                        <span class="me-2">‚ûï</span> Crear Empresa
                                    </a>
                                    <a href="{% url 'empresas:empresas_list' %}" class="btn btn-regency-outline">
                                        <span class="me-2">üìã</span> Lista Completa
                                    </a>
                                    <hr class="my-2">
                                    <a href="#" class="btn btn-outline-secondary">
                                        <span class="me-2">üìÅ</span> Proyectos
                                    </a>
                                    <a href="#" class="btn btn-outline-secondary">
                                        <span class="me-2">üè≠</span> Centros Operativos
                                    </a>
                                    <a href="#" class="btn btn-outline-secondary">
                                        <span class="me-2">üìä</span> ...
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- B√∫squeda R√°pida -->
                        <div class="card shadow-regency">
                            <div class="card-header card-header-secondary">
                                <h5 class="mb-0">üîç B√∫squeda R√°pida</h5>
                            </div>
                            <div class="card-body">
                                <form method="get" action="{% url 'empresas:empresas_list' %}">
                                    <div class="mb-3">
                                        <input type="text" name="search" class="form-control" 
                                               placeholder="Buscar por nombre o NIT..." 
                                               style="border-color: var(--color-primary);">
                                    </div>
                                    <button type="submit" class="btn btn-regency w-100">
                                        üîç Buscar Empresa
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>